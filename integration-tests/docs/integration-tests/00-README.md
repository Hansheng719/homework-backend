# æ•´åˆæ¸¬è©¦æ–‡ä»¶ç¸½è¦½

## ğŸ“– æ–‡ä»¶ç›®çš„

æœ¬æ•´åˆæ¸¬è©¦æ–‡ä»¶é›†æä¾› Balance Transfer Service çš„å®Œæ•´ QA æ¸¬è©¦è¦æ ¼ï¼Œå¾ QA çš„è§’åº¦å®šç¾©æ¸¬è©¦æ¡ˆä¾‹ï¼Œè‘—é‡æ–¼ï¼š
- âœ… **API è«‹æ±‚èˆ‡å›æ‡‰é©—è­‰**
- âœ… **è³‡æ–™åº« (MySQL) ç‹€æ…‹é©—è­‰**
- âœ… **å¿«å– (Redis) ç‹€æ…‹é©—è­‰**

## ğŸ¯ æ¸¬è©¦ç¯„åœ

### æ¶µè“‹ç¯„åœ
| å±¤é¢ | èªªæ˜ |
|------|------|
| **API å±¤** | HTTP è«‹æ±‚æ–¹æ³•ã€ç«¯é»ã€è«‹æ±‚åƒæ•¸ã€å›æ‡‰ç‹€æ…‹ç¢¼ã€å›æ‡‰ JSON çµæ§‹ |
| **è³‡æ–™åº«å±¤** | è³‡æ–™æ­£ç¢ºæ€§ã€é¤˜é¡è¨ˆç®—ã€ç‹€æ…‹æ›´æ–°ã€ç´„æŸé©—è­‰ (unique, not null) |
| **å¿«å–å±¤** | Redis key å­˜åœ¨æ€§ã€å¿«å–å€¼æ­£ç¢ºæ€§ã€å¿«å–å¤±æ•ˆæ™‚æ©Ÿ |

### ä¸æ¶µè“‹ç¯„åœ
- âŒ å…§éƒ¨æœå‹™æ–¹æ³•å‘¼å«
- âŒ MQ è¨Šæ¯ç™¼é€èˆ‡æ¶ˆè²»
- âŒ äº‹ä»¶ç™¼å¸ƒèˆ‡ç›£è½ç´°ç¯€
- âŒ å…§éƒ¨å¯¦ä½œç´°ç¯€ (é–æ©Ÿåˆ¶ã€æ’ç¨‹å™¨ç­‰)

## ğŸ“‹ æ¸¬è©¦åˆ†é¡

å…± **27 å€‹æ•´åˆæ¸¬è©¦æ¡ˆä¾‹**ï¼Œåˆ†ç‚º **7 å¤§é¡åˆ¥**ï¼š

| # | é¡åˆ¥ | æ¸¬è©¦æ¡ˆä¾‹æ•¸ | æ–‡ä»¶ | èªªæ˜ |
|---|------|-----------|------|------|
| 1 | Happy Path Scenarios | 3 | [01-Happy-Path.md](test-cases/01-Happy-Path.md) | æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸æµç¨‹ |
| 2 | Business Logic Validation | 5 | [02-Business-Logic.md](test-cases/02-Business-Logic.md) | æ¥­å‹™è¦å‰‡é©—è­‰ |
| 3 | Error Handling | 3 | [03-Error-Handling.md](test-cases/03-Error-Handling.md) | éŒ¯èª¤è™•ç†èˆ‡å›æ‡‰ |
| 4 | State Transition | 3 | [04-State-Transition.md](test-cases/04-State-Transition.md) | è½‰å¸³ç‹€æ…‹è½‰æ› |
| 5 | Data Integrity | 3 | [05-Data-Integrity.md](test-cases/05-Data-Integrity.md) | è³‡æ–™å®Œæ•´æ€§èˆ‡æº–ç¢ºæ€§ |
| 6 | Cache Integration | 3 | [06-Cache-Integration.md](test-cases/06-Cache-Integration.md) | Redis å¿«å–è¡Œç‚º |
| 7 | Edge Cases | 7 | [07-Edge-Cases.md](test-cases/07-Edge-Cases.md) | é‚Šç•Œæ¢ä»¶èˆ‡è¼¸å…¥é©—è­‰ |

### è©³ç´°æ¸¬è©¦æ¡ˆä¾‹åˆ—è¡¨

#### 1. Happy Path Scenarios
- **IT-001**: å®Œæ•´è½‰å¸³æµç¨‹ - å»ºç«‹ä½¿ç”¨è€… â†’ è½‰å¸³ â†’ é©—è­‰é¤˜é¡
- **IT-002**: å–æ¶ˆ PENDING ç‹€æ…‹è½‰å¸³
- **IT-003**: åˆ†é æŸ¥è©¢è½‰å¸³æ­·å²

#### 2. Business Logic Validation
- **IT-004**: é¤˜é¡ä¸è¶³æ™‚è½‰å¸³å¤±æ•—
- **IT-005**: é‡è¤‡ userId å»ºç«‹ä½¿ç”¨è€…å¤±æ•—
- **IT-006**: ç„¡æ³•å–æ¶ˆé PENDING ç‹€æ…‹è½‰å¸³
- **IT-007**: è¶…é 10 åˆ†é˜ç„¡æ³•å–æ¶ˆè½‰å¸³
- **IT-008**: è‡ªæˆ‘è½‰å¸³è¢«æ‹’çµ•

#### 3. Error Handling
- **IT-009**: ä½¿ç”¨è€…ä¸å­˜åœ¨è¿”å› 404
- **IT-010**: ç„¡æ•ˆè«‹æ±‚æ ¼å¼è¿”å› 400
- **IT-011**: è½‰å¸³ä¸å­˜åœ¨è¿”å› 404

#### 4. State Transition
- **IT-012**: è½‰å¸³ç‹€æ…‹ PENDING â†’ COMPLETED
- **IT-013**: è½‰å¸³ç‹€æ…‹ PENDING â†’ CANCELLED
- **IT-014**: è½‰å¸³å¤±æ•—ç‹€æ…‹ (é¤˜é¡ä¸è¶³)

#### 5. Data Integrity
- **IT-015**: ä¸¦ç™¼è½‰å¸³é¤˜é¡ä¸€è‡´æ€§
- **IT-016**: å¤šç­†è½‰å¸³é¤˜é¡è¨ˆç®—æº–ç¢º
- **IT-017**: ç³»çµ±ç¸½é¤˜é¡å®ˆæ†

#### 6. Cache Integration
- **IT-018**: å¿«å–å‘½ä¸­èˆ‡æœªå‘½ä¸­
- **IT-019**: é¤˜é¡æ›´æ–°å¾Œå¿«å–å¤±æ•ˆ
- **IT-020**: å¤šä½¿ç”¨è€…å¿«å–éš”é›¢

#### 7. Edge Cases
- **IT-021**: ç©ºçµæœé›†åˆ†é 
- **IT-023**: é‚Šç•Œåˆ†é å¤§å° (size=1, size=100)
- **IT-024**: æ°å¥½ 10 åˆ†é˜å–æ¶ˆé‚Šç•Œ
- **IT-025**: è² æ•¸é‡‘é¡é©—è­‰
- **IT-026**: é›¶é‡‘é¡è½‰å¸³
- **IT-027**: æ¥µå¤§é‡‘é¡è½‰å¸³
- **IT-028**: ç‰¹æ®Šå­—å…ƒ userId

## ğŸ“š æ–‡ä»¶å°èˆª

### å¿«é€Ÿé–‹å§‹
1. **[ç’°å¢ƒè¨­å®š](01-ç’°å¢ƒè¨­å®š.md)** - è¨­å®šæ¸¬è©¦ç’°å¢ƒ (Docker, MySQL, Redis)
2. **[æ¸¬è©¦åŸ·è¡ŒæŒ‡å—](02-æ¸¬è©¦åŸ·è¡ŒæŒ‡å—.md)** - åŸ·è¡Œæ¸¬è©¦çš„æ–¹æ³•

### æ¸¬è©¦æ¡ˆä¾‹
- **[Happy Path](test-cases/01-Happy-Path.md)** - æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦
- **[Business Logic](test-cases/02-Business-Logic.md)** - æ¥­å‹™è¦å‰‡æ¸¬è©¦
- **[Error Handling](test-cases/03-Error-Handling.md)** - éŒ¯èª¤è™•ç†æ¸¬è©¦
- **[State Transition](test-cases/04-State-Transition.md)** - ç‹€æ…‹è½‰æ›æ¸¬è©¦
- **[Data Integrity](test-cases/05-Data-Integrity.md)** - è³‡æ–™å®Œæ•´æ€§æ¸¬è©¦
- **[Cache Integration](test-cases/06-Cache-Integration.md)** - å¿«å–æ•´åˆæ¸¬è©¦
- **[Edge Cases](test-cases/07-Edge-Cases.md)** - é‚Šç•Œæƒ…æ³æ¸¬è©¦

### åƒè€ƒæ–‡ä»¶
- **[æ¸¬è©¦çµ„ç¹”å»ºè­°](03-æ¸¬è©¦çµ„ç¹”å»ºè­°.md)** - æ¸¬è©¦ç¨‹å¼ç¢¼çµ„ç¹”æ–¹å¼

## ğŸ” æ¸¬è©¦æ¡ˆä¾‹æ ¼å¼èªªæ˜

æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹éµå¾ªçµ±ä¸€æ ¼å¼ï¼š

```markdown
### IT-XXX: æ¸¬è©¦æ¡ˆä¾‹åç¨±

**Test ID**: IT-XXX
**Category**: æ¸¬è©¦åˆ†é¡
**Test Name**: Java æ¸¬è©¦æ–¹æ³•åç¨±

**Description**:
æ¸¬è©¦ç›®çš„ç°¡è¿°

**Preconditions**:
- å‰ç½®æ¢ä»¶ 1
- å‰ç½®æ¢ä»¶ 2

**Test Steps**:
1. **æ­¥é©Ÿ 1 åç¨±**
   - Request: API è«‹æ±‚
   - Expected: é æœŸ API å›æ‡‰
   - Verify DB: è³‡æ–™åº«é©—è­‰
   - Verify Redis: å¿«å–é©—è­‰

2. **æ­¥é©Ÿ 2 åç¨±**
   - ...

**Expected Result**:
- æ•´é«”é æœŸçµæœæè¿°

**Verification SQL**:
```sql
-- é©—è­‰ç”¨ SQL æŸ¥è©¢
SELECT ... FROM ... WHERE ...;
```

**Verification Redis**:
```bash
# Redis é©—è­‰å‘½ä»¤
redis-cli GET key
```
```

## ğŸ¯ QA æ¸¬è©¦é‡é»

### API é©—è­‰é‡é»
- âœ… HTTP ç‹€æ…‹ç¢¼æ­£ç¢º (200, 201, 400, 404, 409, 500)
- âœ… å›æ‡‰ JSON çµæ§‹ç¬¦åˆè¦æ ¼
- âœ… å›æ‡‰è³‡æ–™å€¼æ­£ç¢º
- âœ… éŒ¯èª¤è¨Šæ¯æ¸…æ™°æ˜“æ‡‚

### è³‡æ–™åº«é©—è­‰é‡é»
- âœ… è³‡æ–™æ­£ç¢ºå¯«å…¥å°æ‡‰è³‡æ–™è¡¨
- âœ… é¤˜é¡è¨ˆç®—æº–ç¢ºç„¡èª¤
- âœ… ç‹€æ…‹æ¬„ä½æ­£ç¢ºæ›´æ–°
- âœ… å”¯ä¸€ç´„æŸã€éç©ºç´„æŸç”Ÿæ•ˆ
- âœ… æ™‚é–“æˆ³æ­£ç¢ºè¨˜éŒ„

### å¿«å–é©—è­‰é‡é»
- âœ… ç¬¬ä¸€æ¬¡æŸ¥è©¢å»ºç«‹å¿«å–
- âœ… ç¬¬äºŒæ¬¡æŸ¥è©¢å‘½ä¸­å¿«å–
- âœ… è³‡æ–™æ›´æ–°å¾Œå¿«å–å¤±æ•ˆ
- âœ… ä¸åŒä½¿ç”¨è€…å¿«å–ç¨ç«‹

## ğŸ“Š æ¸¬è©¦è¦†è“‹çµ±è¨ˆ

| API ç«¯é» | æ¸¬è©¦æ¡ˆä¾‹æ•¸ |
|----------|-----------|
| POST /users | 6 |
| GET /users/{userId}/balance | 5 |
| POST /transfers | 10 |
| GET /transfers | 4 |
| POST /transfers/{transferId}/cancel | 4 |
| **ç¸½è¨ˆ** | **29** (éƒ¨åˆ†æ¡ˆä¾‹æ¸¬è©¦å¤šå€‹ç«¯é») |

## ğŸš€ åŸ·è¡Œæ¸¬è©¦

```bash
# 1. å•Ÿå‹•æ¸¬è©¦ç’°å¢ƒ
cd docs/integration-tests
# åƒè€ƒ 01-ç’°å¢ƒè¨­å®š.md

# 2. åŸ·è¡Œæ‰€æœ‰æ•´åˆæ¸¬è©¦
./mvnw clean test -Dspring.profiles.active=test

# 3. åŸ·è¡Œç‰¹å®šåˆ†é¡æ¸¬è©¦
./mvnw test -Dtest=HappyPathIntegrationTest

# 4. æŸ¥çœ‹æ¸¬è©¦å ±å‘Š
open target/surefire-reports/index.html
```

è©³ç´°åŸ·è¡Œæ–¹å¼è«‹åƒè€ƒï¼š[æ¸¬è©¦åŸ·è¡ŒæŒ‡å—](02-æ¸¬è©¦åŸ·è¡ŒæŒ‡å—.md)

## ğŸ“ ä½¿ç”¨èªªæ˜

### å°æ–¼ QA äººå“¡
1. é–±è®€ [ç’°å¢ƒè¨­å®š](01-ç’°å¢ƒè¨­å®š.md) æº–å‚™æ¸¬è©¦ç’°å¢ƒ
2. ä¾ç…§å„æ¸¬è©¦æ¡ˆä¾‹æ–‡ä»¶åŸ·è¡Œæ¸¬è©¦
3. ä½¿ç”¨æä¾›çš„ SQL å’Œ Redis å‘½ä»¤é©—è­‰çµæœ
4. è¨˜éŒ„æ¸¬è©¦çµæœå’Œç™¼ç¾çš„å•é¡Œ

### å°æ–¼é–‹ç™¼äººå“¡
1. åƒè€ƒæ¸¬è©¦æ¡ˆä¾‹å¯¦ä½œè‡ªå‹•åŒ–æ•´åˆæ¸¬è©¦
2. ä½¿ç”¨ [æ¸¬è©¦çµ„ç¹”å»ºè­°](03-æ¸¬è©¦çµ„ç¹”å»ºè­°.md) çµ„ç¹”æ¸¬è©¦ç¨‹å¼ç¢¼
3. ç¢ºä¿æ‰€æœ‰æ¸¬è©¦æ¡ˆä¾‹é€šé
4. æ–°åŠŸèƒ½é–‹ç™¼æ™‚å¢åŠ ç›¸æ‡‰æ¸¬è©¦æ¡ˆä¾‹

## ğŸ”— ç›¸é—œè³‡æº

- [README.md](../../../README.md) - å°ˆæ¡ˆç¸½è¦½èˆ‡éœ€æ±‚èªªæ˜
- [Controller å–®å…ƒæ¸¬è©¦](../../src/test/java/com/example/demo/controller/) - ç¾æœ‰å–®å…ƒæ¸¬è©¦
- [API è¦æ ¼](../../../README.md#api-endpoints) - API ç«¯é»è¦æ ¼


---

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2026-01-23
